sap.ui.define(["jquery.sap.global","./library","sap/ui/core/Control","sap/ui/core/ValueStateSupport"],function(a,b,c,d){"use strict";var e=c.extend("ute.ui.commons.Textfield",{metadata:{library:"ute.ui.commons",properties:{value:{type:"string",group:"Data",defaultValue:"",bindable:"bindable"},enabled:{type:"boolean",group:"Behavior",defaultValue:!0},editable:{type:"boolean",group:"Behavior",defaultValue:!0},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"200px"},maxLength:{type:"int",group:"Behavior",defaultValue:0},name:{type:"string",group:"Misc",defaultValue:null},tooltip:{type:"string",group:"Misc",defaultValue:null,bindable:"bindable"},placeholder:{type:"string",group:"Appearance",defaultValue:null},fieldType:{type:"ute.ui.commons.TextfieldType",group:"Appearance",defaultValue:"Regular"},label:{type:"string",group:"Appearance",defaultvalue:null},valueType:{type:"string",group:"Data",defaultValue:"S"}},events:{change:{parameters:{newValue:{type:"string"}}},enterKeyPress:{},focusIn:{},liveChange:{parameters:{liveValue:{type:"string"}}}}}});return e.prototype.onChange=function(a){this._checkChange(a),a.preventDefault(),a.stopPropagation&&a.stopPropagation()},e.prototype.onfocusout=function(a){this._checkChange(a),a.preventDefault(),a.stopPropagation&&a.stopPropagation()},e.prototype.onsapfocusleave=function(a){this._checkChange(a),a.preventDefault(),a.stopPropagation&&a.stopPropagation()},e.prototype.onfocusin=function(a){a.preventDefault(),a.stopPropagation&&a.stopPropagation(),this.fireFocusIn(a)},e.prototype.onsapenter=function(a){a.preventDefault(),a.stopPropagation&&a.stopPropagation(),this._checkChange(a),this.fireEnterKeyPress(a)},e.prototype.onkeypress=function(b){if(b.which===a.sap.KeyCodes.Z&&b.ctrlKey&&!b.altKey&&b.preventDefault(),!this.getValueType()||"I"!==this.getValueType()&&"i"!==this.getValueType()||(a(this.getInputDomRef()).val(a(this.getInputDomRef()).val().replace(/[^\d].+/,"")),(b.which<48||b.which>57)&&b.preventDefault()),this.getValueType()&&("d"===this.getValueType()||"D"===this.getValueType())){var c,d=b.which,e=a(this.getInputDomRef()).val();if(d>0&&(48>d||d>57))if(46===d)0===this.getCursorPosition(this)&&"-"===e.charAt(0)&&b.preventDefault(),e.match(/[.]/)&&b.preventDefault();else if(45===d)"-"===e.charAt(0)&&b.preventDefault(),0!==this.getCursorPosition(this)&&b.preventDefault();else{if(8===d)return!0;b.preventDefault()}else d>0&&d>=48&&57>=d&&("-"===e.charAt(0)&&0===this.getCursorPosition(this)&&b.preventDefault(),c=e.split("."),c[1].length>1&&b.preventDefault())}},e.prototype.getCursorPosition=function(a){var b,c,d;return a.selectionStart?a.selectionStart:document.selection?(a.focus(),b=document.selection.createRange(),null===b?0:(c=a.createTextRange(),d=c.duplicate(),c.moveToBookmark(b.getBookmark()),d.setEndPoint("EndToStart",c),d.text.length)):0},e.prototype.onpaste=function(a){!this.getValueType()||"I"!==this.getValueType()&&"i"!==this.getValueType()||a.preventDefault(),!this.getValueType()||"d"!==this.getValueType()&&"D"!==this.getValueType()||a.preventDefault()},e.prototype._checkChange=function(){var a=this.getInputDomRef(),b=a&&a.value,c=this.getValue();b&&(b=b.trim()),c&&(c=c.trim()),this.getEditable()&&this.getEnabled()&&c!==b&&(this.setProperty("value",b,!0),this.fireChange({newValue:b}))},e.prototype._getRenderOuter=function(){if(void 0===this.bRenderOuter){var a=this.getRenderer();this.bRenderOuter=a.renderOuterAttributes||a.renderOuterContentBefore||a.renderOuterContent?!0:!1}return this.bRenderOuter},e.prototype.getInputDomRef=function(){return this.getDomRef("input")||null},e.prototype.oninput=function(a){this._realOninput(a)&&this._fireLiveChange(a)},e.prototype._realOninput=function(){if(sap.ui.Device.browser.internet_explorer){var b=a(this.getInputDomRef()),c=this._sRenderedValue;if(this._sRenderedValue=void 0,c===b.val())return!1}return!0},e.prototype.setTooltip=function(){var b,c=this.getInputDomRef();return c&&(b=d.enrichTooltip(this,this.getTooltip()),a(c).attr("title",b||"")),this},e.prototype._fireLiveChange=function(){if(this.getEnabled()&&this.getEditable()){var b=a(this.getInputDomRef()).val();this.fireLiveChange({liveValue:b})}},e},!0);